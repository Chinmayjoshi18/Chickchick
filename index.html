<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Empire Tycoon</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            color: #333;
            overflow: hidden;
        }

        .game-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }

        /* Header */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .time-info h2 {
            color: #2E8B57;
            font-size: 1.3em;
            margin: 0;
        }

        .time-info p {
            color: #666;
            font-size: 0.8em;
            margin: 0;
        }

        .header-controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .control-btn.start {
            background: linear-gradient(45deg, #2E8B57, #32CD32);
        }

        .control-btn.reset {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .control-btn:hover {
            transform: translateY(-2px);
        }

        /* Main Layout */
        .game-main {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 12px;
            flex: 1;
            min-height: 0;
        }

        .left-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Balance Row */
        .balance-row {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        /* Stats Row */
        .stats-row {
            margin-bottom: 10px;
        }

        .balance-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 249, 250, 0.95));
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.15),
                0 2px 20px rgba(46, 139, 87, 0.2),
                inset 0 1px 3px rgba(255, 255, 255, 0.8);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border: 3px solid rgba(46, 139, 87, 0.3);
            position: relative;
            overflow: hidden;
            width: 350px;
            height: 130px;
            transition: all 0.3s ease;
        }

        .balance-card:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 50px rgba(0, 0, 0, 0.2),
                0 4px 25px rgba(46, 139, 87, 0.25),
                inset 0 2px 5px rgba(255, 255, 255, 0.9);
            border-color: rgba(46, 139, 87, 0.5);
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(46, 139, 87, 0.08), transparent);
            animation: shimmer 4s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .balance-amount {
            font-size: 4em;
            font-weight: 900;
            color: #1B5E20;
            margin-bottom: 8px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
            line-height: 1;
        }

        .balance-label {
            color: #2E7D32;
            font-size: 1.1em;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 3px;
            position: relative;
            z-index: 1;
        }

        .core-stats {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 1.6em;
            font-weight: bold;
            color: #2E8B57;
            margin-bottom: 3px;
        }

        .stat-label {
            color: #666;
            font-size: 0.75em;
            font-weight: 500;
        }

        /* Farm Area */
        .farm-area {
            background: rgba(255, 255, 255, 0.95);
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .farm-title {
            color: #2E8B57;
            font-size: 1.2em;
            margin-bottom: 12px;
            text-align: center;
        }

        .chicken-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
            flex: 1;
            overflow-y: auto;
            align-content: flex-start;
        }

        .chicken {
            background: rgba(46, 139, 87, 0.1);
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            min-width: 80px;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .chicken:hover {
            background: rgba(46, 139, 87, 0.2);
            transform: translateY(-1px);
        }

        .chicken-icon {
            font-size: 1.8em;
            margin-bottom: 4px;
        }

        .hunger-bar {
            width: 100%;
            height: 5px;
            background: #ddd;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 4px;
        }

        .hunger-fill {
            height: 100%;
            transition: all 0.3s ease;
        }

        .hunger-high { background: #4CAF50; }
        .hunger-medium { background: #FF9800; }
        .hunger-low { background: #f44336; }

        .chicken-dying { 
            border: 2px solid #f44336;
            background: rgba(244, 67, 54, 0.15);
        }

        .chicken-dead { 
            opacity: 0.5;
            background: rgba(0, 0, 0, 0.1);
        }

        .collect-button {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53, #FFD93D);
            border: none;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            font-size: 1.4em;
            font-weight: 900;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 12px 40px rgba(255, 107, 107, 0.5), inset 0 2px 8px rgba(255, 255, 255, 0.3);
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
            margin: 0 auto;
            border: 4px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .collect-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: collectShimmer 2s infinite;
        }

        @keyframes collectShimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes collectPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 12px 40px rgba(255, 107, 107, 0.5), inset 0 2px 8px rgba(255, 255, 255, 0.3); }
            50% { transform: scale(1.03); box-shadow: 0 15px 50px rgba(255, 107, 107, 0.7), inset 0 3px 10px rgba(255, 255, 255, 0.4); }
        }

        .collect-button.has-eggs {
            animation: collectPulse 1.5s infinite ease-in-out;
        }

        .collect-button:hover {
            transform: translateY(-5px) scale(1.08);
            box-shadow: 0 20px 60px rgba(255, 107, 107, 0.6), inset 0 4px 12px rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .collect-button:active {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 15px 45px rgba(255, 107, 107, 0.7);
        }

        /* Shop */
        .shop-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .shop-title {
            text-align: center;
            font-size: 1.3em;
            color: #2E8B57;
            margin-bottom: 12px;
            font-weight: bold;
        }

        .shop-container {
            overflow-y: auto;
            max-height: calc(100vh - 180px);
            padding-right: 5px;
        }

        .shop-container::-webkit-scrollbar {
            width: 6px;
        }

        .shop-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .shop-container::-webkit-scrollbar-thumb {
            background: rgba(46, 139, 87, 0.3);
            border-radius: 3px;
        }

        .shop-container::-webkit-scrollbar-thumb:hover {
            background: rgba(46, 139, 87, 0.5);
        }

        .shop-category {
            margin-bottom: 20px;
        }

        .shop-category:last-child {
            margin-bottom: 0;
        }

        .category-title {
            color: #2E8B57;
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 10px;
            padding: 8px 12px;
            background: rgba(46, 139, 87, 0.1);
            border-radius: 8px;
            border-left: 4px solid #2E8B57;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .shop-item:hover {
            border-color: #2E8B57;
            transform: translateY(-1px);
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
        }

        .shop-item h3 {
            color: #2E8B57;
            font-size: 0.9em;
            margin-bottom: 6px;
        }

        .shop-item p {
            color: #666;
            font-size: 0.75em;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .buy-button {
            background: linear-gradient(45deg, #2E8B57, #32CD32);
            border: none;
            border-radius: 16px;
            padding: 6px 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.8em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(46, 139, 87, 0.3);
            width: 100%;
            margin-bottom: 4px;
        }

        .buy-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 12px rgba(46, 139, 87, 0.4);
        }

        .buy-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .automation-controls {
            margin-top: 6px;
        }

        .automation-controls .buy-button {
            font-size: 0.7em;
            padding: 4px 8px;
            margin-bottom: 3px;
        }

        /* Production Section */
        .production-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid rgba(46, 139, 87, 0.2);
        }

        .production-header h3 {
            color: #2E8B57;
            font-size: 1.1em;
            margin-bottom: 8px;
            text-align: center;
        }

        .production-queue {
            min-height: 40px;
            margin-bottom: 10px;
        }

        .production-item {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-radius: 6px;
            padding: 6px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8em;
        }

        .production-progress {
            background: #ddd;
            border-radius: 10px;
            height: 6px;
            width: 80px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #ffc107, #ff8f00);
            transition: width 0.1s ease;
        }

        .production-recipes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }

        .recipe-item {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .recipe-item:hover {
            border-color: #2E8B57;
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .recipe-icon {
            font-size: 1.5em;
        }

        .recipe-info {
            flex: 1;
        }

        .recipe-name {
            font-weight: bold;
            font-size: 0.8em;
            color: #2E8B57;
        }

        .recipe-cost {
            font-size: 0.7em;
            color: #666;
        }

        /* Sales Section */
        .sales-section {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .sales-button {
            flex: 1;
            background: linear-gradient(45deg, #2E8B57, #32CD32);
            border: none;
            border-radius: 10px;
            padding: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9em;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(46, 139, 87, 0.3);
        }

        .sales-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 16px rgba(46, 139, 87, 0.4);
        }

        .sales-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Floating Text */
        .floating-text {
            position: fixed;
            z-index: 1000;
            font-weight: bold;
            font-size: 1.1em;
            color: #4CAF50;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            animation: floatUp 2s ease-out forwards;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0px); }
            100% { opacity: 0; transform: translateY(-50px); }
        }

        /* Warning */
        .warning {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid #f44336;
            padding: 6px;
            border-radius: 6px;
            margin: 6px 0;
            color: #f44336;
            font-weight: bold;
            text-align: center;
            font-size: 0.8em;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .game-main { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .game-header { flex-direction: column; gap: 8px; }
            .balance-card { 
                width: 280px;
                height: 110px;
                padding: 20px 30px;
            }
            .balance-amount { font-size: 3em; color: #1B5E20; }
            .balance-label { font-size: 1em; letter-spacing: 2px; color: #2E7D32; }
            .core-stats { grid-template-columns: repeat(3, 1fr); }
            .collect-button { 
                width: 160px; 
                height: 160px; 
                font-size: 1.2em;
            }
            .category-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .balance-card { 
                width: 240px;
                height: 90px;
                padding: 15px 25px;
            }
            .balance-amount { font-size: 2.2em; color: #1B5E20; }
            .balance-label { font-size: 0.9em; letter-spacing: 1px; color: #2E7D32; }
            .collect-button { 
                width: 140px; 
                height: 140px; 
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <div class="game-header">
            <div class="time-info">
                <h2>📅 Day <span id="gameDay">1</span> | 🕐 <span id="gameTime">8:00 AM</span></h2>
                <p>Game Time: 60x Speed (1 real minute = 1 game hour)</p>
            </div>
            <div class="header-controls">
                <button class="control-btn start" onclick="startGame()">🎮 Start Game</button>
                <button class="control-btn reset" onclick="resetGame()">🔄 Reset</button>
            </div>
        </div>

        <!-- Main Game -->
        <div class="game-main">
            <!-- Left Section -->
            <div class="left-section">
                <!-- Balance Row -->
                <div class="balance-row">
                    <div class="balance-card">
                        <div class="balance-amount" id="money">$10</div>
                        <div class="balance-label">Balance</div>
                    </div>
                </div>

                <!-- Stats Row -->
                <div class="stats-row">
                    <div class="core-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="eggs">0</div>
                            <div class="stat-label">🥚 Ready</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="eggInventory">0</div>
                            <div class="stat-label">🥚 Inventory</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="chickens">3</div>
                            <div class="stat-label">🐔 Chickens</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="goldenChickens">0</div>
                            <div class="stat-label">🐓 Golden</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="feedInventory">50</div>
                            <div class="stat-label">🌾 Feed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="cooks">1</div>
                            <div class="stat-label">👨‍🍳 Cooks</div>
                        </div>
                    </div>
                </div>

                <!-- Farm -->
                <div class="farm-area">
                    <h2 class="farm-title">🏡 Your Chicken Farm</h2>
                    <div id="chickens-display" class="chicken-display"></div>
                    <div id="warnings-display"></div>
                    
                    <!-- Production Section -->
                    <div class="production-section">
                        <div class="production-header">
                            <h3>🍳 Production Kitchen</h3>
                            <div id="production-slots-info" style="text-align: center; font-size: 0.8em; color: #666; margin-bottom: 5px;"></div>
                        </div>
                        <div id="production-queue" class="production-queue"></div>
                        <div class="production-recipes">
                            <div class="recipe-item" onclick="startProduction('scrambledEggs')">
                                <span class="recipe-icon">🍳</span>
                                <div class="recipe-info">
                                    <div class="recipe-name">Scrambled Eggs</div>
                                    <div class="recipe-cost">1🥚 → $6</div>
                                </div>
                            </div>
                            <div class="recipe-item" onclick="startProduction('eggSandwich')">
                                <span class="recipe-icon">🥪</span>
                                <div class="recipe-info">
                                    <div class="recipe-name">Egg Sandwich</div>
                                    <div class="recipe-cost">2🥚 → $15</div>
                                </div>
                            </div>
                            <div class="recipe-item" onclick="startProduction('omelet')">
                                <span class="recipe-icon">🍽️</span>
                                <div class="recipe-info">
                                    <div class="recipe-name">Omelet</div>
                                    <div class="recipe-cost">3🥚 → $25</div>
                                </div>
                            </div>
                            <div class="recipe-item" onclick="startProduction('birthdayCake')">
                                <span class="recipe-icon">🎂</span>
                                <div class="recipe-info">
                                    <div class="recipe-name">Birthday Cake</div>
                                    <div class="recipe-cost">4🥚 + 1🥇 → $75</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sales Section -->
                    <div class="sales-section">
                        <button class="sales-button sell-eggs" onclick="sellEggs()">
                            💰 Sell Eggs<br><small id="eggSaleInfo">0 eggs ($0)</small>
                        </button>
                        <button class="sales-button sell-products" onclick="sellProducts()">
                            🍽️ Sell Products<br><small id="productSaleInfo">0 products ($0)</small>
                        </button>
                    </div>
                    
                    <button class="collect-button" onclick="collectEggs()">
                        🥚 Collect<br><small id="collectInfo">0 ready</small>
                    </button>
                </div>
            </div>

            <!-- Shop -->
            <div class="shop-section">
                <h2 class="shop-title">🛒 Shop</h2>
                <div class="shop-container">
                    
                    <!-- Livestock Category -->
                    <div class="shop-category">
                        <h3 class="category-title">🐔 Livestock</h3>
                        <div class="category-grid">
                            <div class="shop-item">
                                <h3>🐔 Chicken</h3>
                                <p>Lays eggs every 6 seconds</p>
                                <button class="buy-button" onclick="buyChicken()">$<span id="chickenPrice">15</span></button>
                            </div>
                            <div class="shop-item">
                                <h3>🐓 Golden Chicken</h3>
                                <p>Golden eggs worth $10!</p>
                                <button class="buy-button" onclick="buyGoldenChicken()">$<span id="goldenPrice">500</span></button>
                            </div>
                        </div>
                    </div>

                    <!-- Upgrades Category -->
                    <div class="shop-category">
                        <h3 class="category-title">⬆️ Upgrades</h3>
                        <div class="category-grid">
                            <div class="shop-item">
                                <h3>🏠 Better Coop</h3>
                                <p>+20% egg production</p>
                                <button class="buy-button" onclick="buyCoopUpgrade()">$<span id="coopPrice">50</span></button>
                            </div>
                            <div class="shop-item">
                                <h3>🍳 Kitchen Upgrade</h3>
                                <p>-20% production time</p>
                                <button class="buy-button" onclick="buyKitchenUpgrade()">$<span id="kitchenPrice">100</span></button>
                            </div>
                        </div>
                    </div>

                    <!-- Staff Category -->
                    <div class="shop-category">
                        <h3 class="category-title">👥 Staff</h3>
                        <div class="category-grid">
                            <div class="shop-item">
                                <h3>👨‍🍳 Hire Cook</h3>
                                <p>+1 production slot<br>$<span id="cookSalary">10</span>/hr salary</p>
                                <button class="buy-button" onclick="buyCook()">$<span id="cookPrice">500</span></button>
                            </div>
                        </div>
                    </div>

                    <!-- Automation Category -->
                    <div class="shop-category">
                        <h3 class="category-title">🤖 Automation</h3>
                        <div class="category-grid">
                            <div class="shop-item">
                                <h3>🤖 Auto-Collector</h3>
                                <p>Auto-collect eggs</p>
                                <button class="buy-button" id="buyAutoCollector" onclick="buyAutoCollector()">$500</button>
                                <div id="autoCollectorControls" class="automation-controls" style="display: none;">
                                    <button class="buy-button" onclick="startAutoCollector()">Start ($30)</button>
                                    <button class="buy-button" onclick="rechargeAutoCollector()">Recharge ($5)</button>
                                </div>
                            </div>
                            <div class="shop-item">
                                <h3>🤖 Auto-Feeder</h3>
                                <p>Auto-feed chickens</p>
                                <button class="buy-button" id="buyAutoFeeder" onclick="buyAutoFeeder()">$400</button>
                                <div id="autoFeederControls" class="automation-controls" style="display: none;">
                                    <button class="buy-button" onclick="startAutoFeeder()">Start ($90)</button>
                                    <button class="buy-button" onclick="rechargeAutoFeeder()">Recharge ($15)</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Feed Category -->
                    <div class="shop-category">
                        <h3 class="category-title">🌾 Feed Supply</h3>
                        <div class="category-grid">
                            <div class="shop-item">
                                <h3>🌾 Small Feed Pack</h3>
                                <p>100 units of feed<br>$0.25 per unit</p>
                                <button class="buy-button" onclick="buySmallFeed()">Buy for $25</button>
                            </div>
                            <div class="shop-item">
                                <h3>🌾 Large Feed Pack</h3>
                                <p>500 units of feed<br>Better value!</p>
                                <button class="buy-button" onclick="buyLargeFeed()">Buy for $125</button>
                            </div>
                            <div class="shop-item">
                                <h3>🌾 Mega Feed Pack</h3>
                                <p>1000 units of feed<br>Best value!</p>
                                <button class="buy-button" onclick="buyMegaFeed()">Buy for $250</button>
                            </div>
                        </div>
                    </div>

                    <!-- Tools Category -->
                    <div class="shop-category">
                        <h3 class="category-title">🔧 Tools</h3>
                        <div class="category-grid">
                            <div class="shop-item">
                                <h3>🔧 Game Tools</h3>
                                <p>Save & debug</p>
                                <button class="buy-button" onclick="saveGame()" style="background: #6C5CE7;">💾 Save</button>
                                <button class="buy-button" onclick="showDebug()" style="background: #FF6B6B;">🔍 Debug</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let game = {
            money: 10,
            eggs: 0, // Raw eggs from chickens (not yet collected)
            goldenEggs: 0, // Raw golden eggs from chickens
            eggInventory: 0, // Collected eggs ready for use
            goldenEggInventory: 0, // Collected golden eggs
            chickens: 3,
            goldenChickens: 0,
            coopUpgrades: 0,
            hasAutoCollector: false,
            autoCollectorActive: false,
            autoCollectorTime: 0,
            hasAutoFeeder: false,
            autoFeederActive: false,
            autoFeederTime: 0,
            // Feed inventory system
            feedInventory: 50,
            feedConsumptionRate: 2/60,
            goldenFeedRate: 3/60,
            outOfFeedTime: 0,
            gracePeriod: 180,
            lastFeedWarning: 0,
            // Production system
            productionQueue: [], // Active production items
            productionSlots: 1, // How many items can be produced simultaneously
            kitchenUpgrades: 0, // Reduces production time
            cooks: 1, // Number of cooks (determines production slots)
            cookSalaryPerHour: 10, // $10 per cook per hour
            lastSalaryTime: Date.now(), // Last time salaries were paid
            // Products inventory
            products: {
                scrambledEggs: 0,
                eggSandwich: 0,
                omelet: 0,
                birthdayCake: 0
            },
            lastUpdate: Date.now(),
            gameStart: Date.now(),
            running: false
        };

        let gameLoop, saveLoop;

        // Production recipes
        const recipes = {
            scrambledEggs: {
                name: "Scrambled Eggs",
                icon: "🍳",
                eggCost: 1,
                goldenEggCost: 0,
                baseTime: 5000, // 5 seconds in milliseconds
                sellPrice: 6,
                description: "5 seconds - Quick profit"
            },
            eggSandwich: {
                name: "Egg Sandwich", 
                icon: "🥪",
                eggCost: 2,
                goldenEggCost: 0,
                baseTime: 30000, // 30 seconds
                sellPrice: 15,
                description: "30 seconds - Good value"
            },
            omelet: {
                name: "Omelet",
                icon: "🍽️", 
                eggCost: 3,
                goldenEggCost: 0,
                baseTime: 15000, // 15 seconds
                sellPrice: 25,
                description: "15 seconds - High profit"
            },
            birthdayCake: {
                name: "Birthday Cake",
                icon: "🎂",
                eggCost: 4,
                goldenEggCost: 1,
                baseTime: 60000, // 1 minute
                sellPrice: 75,
                description: "1 minute - Premium item"
            }
        };

        // Initialize on load
        window.onload = function() {
            loadGame();
            updateAll();
        };

        // Start game
        function startGame() {
            if (game.running) {
                floatingText('Already running!');
                return;
            }
            
            game.running = true;
            game.lastUpdate = Date.now();
            game.gameStart = Date.now();
            
            gameLoop = setInterval(update, 100);
            saveLoop = setInterval(saveGame, 30000);
            
            floatingText('🎮 Game Started!');
            console.log('Game started!');
        }

        // Reset game
        function resetGame() {
            if (!confirm('Reset all progress?')) return;
            
            if (gameLoop) clearInterval(gameLoop);
            if (saveLoop) clearInterval(saveLoop);
            
            game = {
                money: 10,
                eggs: 0,
                goldenEggs: 0,
                eggInventory: 0,
                goldenEggInventory: 0,
                chickens: 3,
                goldenChickens: 0,
                coopUpgrades: 0,
                hasAutoCollector: false,
                autoCollectorActive: false,
                autoCollectorTime: 0,
                hasAutoFeeder: false,
                autoFeederActive: false,
                autoFeederTime: 0,
                // Feed inventory system
                feedInventory: 50,
                feedConsumptionRate: 2/60,
                goldenFeedRate: 3/60,
                outOfFeedTime: 0,
                gracePeriod: 180,
                lastFeedWarning: 0,
                // Production system
                productionQueue: [],
                productionSlots: 1,
                kitchenUpgrades: 0,
                cooks: 1,
                cookSalaryPerHour: 10,
                lastSalaryTime: Date.now(),
                products: {
                    scrambledEggs: 0,
                    eggSandwich: 0,
                    omelet: 0,
                    birthdayCake: 0
                },
                lastUpdate: Date.now(),
                gameStart: Date.now(),
                running: false
            };
            
            localStorage.removeItem('chickenGame');
            updateAll();
            floatingText('🔄 Reset!');
        }

        // Main update loop
        function update() {
            const now = Date.now();
            const dt = (now - game.lastUpdate) / 1000;
            
            consumeFeed(dt);
            generateEggs(dt);
            handleAutomation(dt);
            processProduction(now);
            payCookSalaries(now);
            
            // Update production slots based on cooks
            game.productionSlots = game.cooks;
            
            game.lastUpdate = now;
            updateAll();
        }

        // Consume feed and handle chicken deaths
        function consumeFeed(dt) {
            const totalChickens = game.chickens + game.goldenChickens;
            if (totalChickens === 0) return;
            
            // Calculate feed consumption
            const regularConsumption = game.chickens * game.feedConsumptionRate * dt;
            const goldenConsumption = game.goldenChickens * game.goldenFeedRate * dt;
            const totalConsumption = regularConsumption + goldenConsumption;
            
            // Consume feed if available
            if (game.feedInventory > 0) {
                game.feedInventory = Math.max(0, game.feedInventory - totalConsumption);
                game.outOfFeedTime = 0; // Reset out of feed timer
            } else {
                // No feed available - start grace period
                game.outOfFeedTime += dt;
                
                // After grace period, start killing chickens
                if (game.outOfFeedTime > game.gracePeriod) {
                    const timeSinceGrace = game.outOfFeedTime - game.gracePeriod;
                    const deathInterval = 30; // One chicken dies every 30 seconds
                    const chickensShouldDie = Math.floor(timeSinceGrace / deathInterval);
                    
                    // Calculate how many have already died
                    const maxChickens = 100; // Assume we never had more than 100 total
                    const currentChickens = game.chickens + game.goldenChickens;
                    const alreadyDied = maxChickens - currentChickens;
                    
                    const newDeaths = Math.max(0, chickensShouldDie - alreadyDied);
                    
                    for (let i = 0; i < newDeaths && (game.chickens > 0 || game.goldenChickens > 0); i++) {
                        if (game.chickens > 0) {
                            game.chickens--;
                            floatingText('💀 Chicken died from starvation!');
                        } else if (game.goldenChickens > 0) {
                            game.goldenChickens--;
                            floatingText('💀 Golden chicken died!');
                        }
                    }
                }
            }
            
            // Auto-feed if active
            if (game.autoFeederActive && game.autoFeederTime > 0 && game.feedInventory < 100) {
                buyFeedBulk(100); // Auto-buy 100 units
            }
        }

        // Generate eggs
        function generateEggs(dt) {
            const eggRate = getEggRate();
            const goldenRate = getGoldenRate();
            
            game.eggs += eggRate * dt;
            game.goldenEggs += goldenRate * dt;
            
            if (game.autoCollectorActive && game.autoCollectorTime > 0) {
                if (game.eggs >= 1 || game.goldenEggs >= 1) {
                    collectEggs();
                }
            }
        }

        // Handle automation
        function handleAutomation(dt) {
            if (game.autoCollectorActive && game.autoCollectorTime > 0) {
                const cost = 0.1 * dt;
                if (game.money >= cost) {
                    game.money -= cost;
                    game.autoCollectorTime -= dt;
                    
                    if (game.autoCollectorTime <= 0) {
                        game.autoCollectorActive = false;
                        game.autoCollectorTime = 0;
                        floatingText('🤖 Collector stopped!');
                    }
                } else {
                    game.autoCollectorActive = false;
                    floatingText('🤖 No money!');
                }
            }
            
            if (game.autoFeederActive && game.autoFeederTime > 0) {
                const cost = 0.15 * dt;
                if (game.money >= cost) {
                    game.money -= cost;
                    game.autoFeederTime -= dt;
                    
                    if (game.autoFeederTime <= 0) {
                        game.autoFeederActive = false;
                        game.autoFeederTime = 0;
                        floatingText('🌾 Feeder stopped!');
                    }
                } else {
                    game.autoFeederActive = false;
                    floatingText('🌾 No money!');
                }
            }
        }

        // Get egg production rate
        function getEggRate() {
            // Chickens are productive if there's feed OR within grace period
            let productive = game.feedInventory > 0 || game.outOfFeedTime < game.gracePeriod ? game.chickens : 0;
            let rate = productive / 6; // 1 egg per 6 seconds per chicken
            rate *= (1 + game.coopUpgrades * 0.2); // Only coop upgrades affect production now
            return rate;
        }

        // Get golden egg rate
        function getGoldenRate() {
            // Golden chickens are productive if there's feed OR within grace period
            let productive = game.feedInventory > 0 || game.outOfFeedTime < game.gracePeriod ? game.goldenChickens : 0;
            let rate = productive / 6;
            rate *= (1 + game.coopUpgrades * 0.2); // Only coop upgrades affect production now
            return rate;
        }

        // Buy feed in bulk
        function buyFeedBulk(amount) {
            const costPer100 = 25; // $25 for 100 units
            const cost = (amount / 100) * costPer100;
            
            if (game.money >= cost) {
                game.money -= cost;
                game.feedInventory += amount;
                return true;
            }
            return false;
        }

        // Collect eggs - now adds to inventory instead of money
        function collectEggs() {
            const eggs = Math.floor(game.eggs);
            const golden = Math.floor(game.goldenEggs);
            
            if (eggs < 1 && golden < 1) return;
            
            game.eggInventory += eggs;
            game.goldenEggInventory += golden;
            game.eggs = 0;
            game.goldenEggs = 0;
            
            floatingText(golden > 0 ? `+${eggs + golden} eggs (${golden} golden!)` : `+${eggs} eggs`);
        }

        // Sell raw eggs for immediate money
        function sellEggs() {
            const regularValue = game.eggInventory * 1; // $1 per regular egg
            const goldenValue = game.goldenEggInventory * 5; // $5 per golden egg
            const totalValue = regularValue + goldenValue;
            
            if (totalValue === 0) return;
            
            game.money += totalValue;
            const totalEggs = game.eggInventory + game.goldenEggInventory;
            game.eggInventory = 0;
            game.goldenEggInventory = 0;
            
            floatingText(`Sold ${totalEggs} eggs for $${totalValue}`);
        }

        // Start production of a recipe
        function startProduction(recipeId) {
            const recipe = recipes[recipeId];
            if (!recipe) return;
            
            // Check if we have enough production slots
            if (game.productionQueue.length >= game.productionSlots) {
                floatingText(`All ${game.productionSlots} cooks are busy!`);
                return;
            }
            
            // Check if we have enough ingredients
            if (game.eggInventory < recipe.eggCost || game.goldenEggInventory < recipe.goldenEggCost) {
                floatingText('Not enough eggs!');
                return;
            }
            
            // Consume ingredients
            game.eggInventory -= recipe.eggCost;
            game.goldenEggInventory -= recipe.goldenEggCost;
            
            // Calculate production time with kitchen upgrades
            const productionTime = recipe.baseTime * Math.pow(0.8, game.kitchenUpgrades);
            
            // Add to production queue
            const productionItem = {
                recipeId: recipeId,
                startTime: Date.now(),
                endTime: Date.now() + productionTime,
                recipe: recipe
            };
            
            game.productionQueue.push(productionItem);
            floatingText(`Started ${recipe.name}!`);
        }

        // Process production queue
        function processProduction(currentTime) {
            for (let i = game.productionQueue.length - 1; i >= 0; i--) {
                const item = game.productionQueue[i];
                
                if (currentTime >= item.endTime) {
                    // Production complete
                    game.products[item.recipeId]++;
                    game.productionQueue.splice(i, 1);
                    floatingText(`${item.recipe.name} ready!`);
                }
            }
        }

        // Sell products
        function sellProducts() {
            let totalValue = 0;
            let totalProducts = 0;
            
            for (const [productId, quantity] of Object.entries(game.products)) {
                if (quantity > 0) {
                    const recipe = recipes[productId];
                    totalValue += quantity * recipe.sellPrice;
                    totalProducts += quantity;
                    game.products[productId] = 0;
                }
            }
            
            if (totalValue > 0) {
                game.money += totalValue;
                floatingText(`Sold ${totalProducts} products for $${totalValue}`);
            }
        }

        // Buy chicken
        function buyChicken() {
            const price = Math.floor(15 * Math.pow(1.2, game.chickens - 3));
            if (game.money >= price) {
                game.money -= price;
                game.chickens++;
                floatingText(`+1 Chicken ($${price})`);
            }
        }

        // Buy golden chicken
        function buyGoldenChicken() {
            const price = Math.floor(500 * Math.pow(1.5, game.goldenChickens));
            if (game.money >= price) {
                game.money -= price;
                game.goldenChickens++;
                floatingText(`+1 Golden ($${price})`);
            }
        }

        // Buy coop upgrade
        function buyCoopUpgrade() {
            const price = Math.floor(50 * Math.pow(2, game.coopUpgrades));
            if (game.money >= price) {
                game.money -= price;
                game.coopUpgrades++;
                floatingText(`Coop upgraded! +20%`);
            }
        }

        // Buy kitchen upgrade
        function buyKitchenUpgrade() {
            const price = Math.floor(100 * Math.pow(2, game.kitchenUpgrades));
            if (game.money >= price) {
                game.money -= price;
                game.kitchenUpgrades++;
                floatingText(`Kitchen upgraded! -20% production time`);
            }
        }

        // Buy cook
        function buyCook() {
            const price = Math.floor(200 * Math.pow(2.5, game.cooks - 1)); // Expensive and exponential
            if (game.money >= price) {
                game.money -= price;
                game.cooks++;
                floatingText(`Hired cook! +1 production slot ($${game.cookSalaryPerHour}/hr salary)`);
            }
        }

        // Pay cook salaries
        function payCookSalaries(currentTime) {
            const hourInMs = 60 * 60 * 1000; // 1 hour in milliseconds
            const timeSinceLastSalary = currentTime - game.lastSalaryTime;
            
            if (timeSinceLastSalary >= hourInMs) {
                const totalSalary = game.cooks * game.cookSalaryPerHour;
                game.money -= totalSalary;
                game.lastSalaryTime = currentTime;
                
                if (totalSalary > 0) {
                    floatingText(`Paid cook salaries: -$${totalSalary}`);
                }
            }
        }


        // Buy auto-collector
        function buyAutoCollector() {
            if (game.money >= 500 && !game.hasAutoCollector) {
                game.money -= 500;
                game.hasAutoCollector = true;
                document.getElementById('buyAutoCollector').textContent = 'Owned ✓';
                document.getElementById('buyAutoCollector').disabled = true;
                document.getElementById('autoCollectorControls').style.display = 'block';
                floatingText(`Auto-collector bought!`);
            }
        }

        // Start auto-collector
        function startAutoCollector() {
            if (game.money >= 30 && game.hasAutoCollector && !game.autoCollectorActive) {
                game.money -= 30;
                game.autoCollectorActive = true;
                game.autoCollectorTime = 300; // 5 minutes
                floatingText(`Collector started!`);
            }
        }

        // Recharge auto-collector
        function rechargeAutoCollector() {
            if (game.money >= 5 && game.hasAutoCollector) {
                game.money -= 5;
                game.autoCollectorTime = 300;
                floatingText(`Collector recharged!`);
            }
        }

        // Buy auto-feeder
        function buyAutoFeeder() {
            if (game.money >= 400 && !game.hasAutoFeeder) {
                game.money -= 400;
                game.hasAutoFeeder = true;
                document.getElementById('buyAutoFeeder').textContent = 'Owned ✓';
                document.getElementById('buyAutoFeeder').disabled = true;
                document.getElementById('autoFeederControls').style.display = 'block';
                floatingText(`Auto-feeder bought!`);
            }
        }

        // Start auto-feeder
        function startAutoFeeder() {
            if (game.money >= 90 && game.hasAutoFeeder && !game.autoFeederActive) {
                game.money -= 90;
                game.autoFeederActive = true;
                game.autoFeederTime = 600; // 10 minutes
                floatingText(`Feeder started!`);
            }
        }

        // Recharge auto-feeder
        function rechargeAutoFeeder() {
            if (game.money >= 15 && game.hasAutoFeeder) {
                game.money -= 15;
                game.autoFeederTime = 600;
                floatingText(`Feeder recharged!`);
            }
        }

        // Buy small feed pack
        function buySmallFeed() {
            if (buyFeedBulk(100)) {
                floatingText(`+100 Feed ($25)`);
            }
        }

        // Buy large feed pack
        function buyLargeFeed() {
            if (buyFeedBulk(500)) {
                floatingText(`+500 Feed ($125)`);
            }
        }

        // Buy mega feed pack
        function buyMegaFeed() {
            if (buyFeedBulk(1000)) {
                floatingText(`+1000 Feed ($250)`);
            }
        }

        // Update all displays
        function updateAll() {
            updateStats();
            updateChickens();
            updatePrices();
            updateTime();
        }

        // Update stats display
        function updateStats() {
            const money = game.money >= 1000000 ? `$${(game.money/1000000).toFixed(1)}M` : `$${game.money.toFixed(2)}`;
            document.getElementById('money').textContent = money;
            document.getElementById('eggs').textContent = Math.floor(game.eggs);
            document.getElementById('eggInventory').textContent = game.eggInventory + (game.goldenEggInventory > 0 ? ` (+${game.goldenEggInventory}🥇)` : '');
            document.getElementById('chickens').textContent = game.chickens;
            document.getElementById('goldenChickens').textContent = game.goldenChickens;
            document.getElementById('feedInventory').textContent = Math.floor(game.feedInventory);
            document.getElementById('cooks').textContent = game.cooks;
            
            // Update collect button
            const totalEggs = Math.floor(game.eggs) + Math.floor(game.goldenEggs);
            document.getElementById('collectInfo').textContent = totalEggs > 0 ? `${totalEggs} ready` : '0 ready';
            
            // Add pulsing animation to collect button when eggs are ready
            const collectBtn = document.querySelector('.collect-button');
            if (totalEggs > 0) {
                collectBtn.classList.add('has-eggs');
            } else {
                collectBtn.classList.remove('has-eggs');
            }
            
            // Update sales buttons
            const eggValue = game.eggInventory * 1 + game.goldenEggInventory * 5;
            const totalEggCount = game.eggInventory + game.goldenEggInventory;
            document.getElementById('eggSaleInfo').textContent = `${totalEggCount} eggs ($${eggValue})`;
            
            const productCount = Object.values(game.products).reduce((sum, count) => sum + count, 0);
            let productValue = 0;
            for (const [productId, quantity] of Object.entries(game.products)) {
                if (quantity > 0) {
                    productValue += quantity * recipes[productId].sellPrice;
                }
            }
            document.getElementById('productSaleInfo').textContent = `${productCount} products ($${productValue})`;
            
            // Update production queue display
            updateProductionDisplay();
        }

        // Update chicken display
        function updateChickens() {
            const container = document.getElementById('chickens-display');
            container.innerHTML = '';
            
            const hasFood = game.feedInventory > 0 || game.outOfFeedTime < game.gracePeriod;
            
            // Regular chickens
            for (let i = 0; i < game.chickens; i++) {
                const div = document.createElement('div');
                div.className = 'chicken';
                
                if (!hasFood && game.outOfFeedTime > game.gracePeriod) {
                    div.classList.add('chicken-dying');
                }
                
                const icon = hasFood ? '🐔' : '😵';
                const status = hasFood ? 'Productive' : 'Starving';
                
                div.innerHTML = `
                    <div class="chicken-icon">${icon}</div>
                    <div>Chicken ${i + 1}</div>
                    <div style="font-size: 0.7em; margin-top: 3px;">${status}</div>
                `;
                
                container.appendChild(div);
            }
            
            // Golden chickens
            for (let i = 0; i < game.goldenChickens; i++) {
                const div = document.createElement('div');
                div.className = 'chicken';
                
                if (!hasFood && game.outOfFeedTime > game.gracePeriod) {
                    div.classList.add('chicken-dying');
                }
                
                const icon = hasFood ? '🐓' : '😵';
                const status = hasFood ? 'Productive' : 'Starving';
                
                div.innerHTML = `
                    <div class="chicken-icon">${icon}</div>
                    <div>Golden ${i + 1}</div>
                    <div style="font-size: 0.7em; margin-top: 3px;">${status}</div>
                `;
                
                container.appendChild(div);
            }
            
            // Warnings
            updateWarnings();
        }

        // Update warnings
        function updateWarnings() {
            const container = document.getElementById('warnings-display');
            container.innerHTML = '';
            
            // Feed warnings
            if (game.feedInventory <= 0) {
                const remainingTime = Math.max(0, game.gracePeriod - game.outOfFeedTime);
                const minutes = Math.floor(remainingTime / 60);
                const seconds = Math.floor(remainingTime % 60);
                
                const warning = document.createElement('div');
                warning.className = 'warning';
                warning.textContent = `🚨 OUT OF FEED! Grace period: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                container.appendChild(warning);
            } else if (game.feedInventory <= 20) {
                const warning = document.createElement('div');
                warning.className = 'warning';
                warning.style.background = 'rgba(255, 193, 7, 0.1)';
                warning.style.borderColor = '#ffc107';
                warning.style.color = '#856404';
                warning.textContent = `⚠️ Feed running low! ${Math.floor(game.feedInventory)} units remaining`;
                container.appendChild(warning);
            }
            
            // Money warnings
            if (game.money < -50) {
                const warning = document.createElement('div');
                warning.className = 'warning';
                warning.textContent = `🚨 DEBT: $${Math.abs(game.money).toFixed(2)}`;
                container.appendChild(warning);
            }
            
            // Feed consumption info
            if (game.chickens > 0 || game.goldenChickens > 0) {
                const totalConsumption = (game.chickens * 120 + game.goldenChickens * 180); // Per hour
                const hoursRemaining = game.feedInventory > 0 ? (game.feedInventory / totalConsumption * 60).toFixed(1) : 0;
                
                const info = document.createElement('div');
                info.style.background = 'rgba(46, 139, 87, 0.1)';
                info.style.border = '1px solid #2E8B57';
                info.style.borderRadius = '6px';
                info.style.padding = '6px';
                info.style.margin = '6px 0';
                info.style.color = '#2E8B57';
                info.style.textAlign = 'center';
                info.style.fontSize = '0.8em';
                info.textContent = `Feed will last ~${hoursRemaining} hours at current consumption`;
                container.appendChild(info);
            }
        }

        // Update production display
        function updateProductionDisplay() {
            const container = document.getElementById('production-queue');
            const slotsInfo = document.getElementById('production-slots-info');
            container.innerHTML = '';
            
            // Update slots info
            slotsInfo.textContent = `Using ${game.productionQueue.length}/${game.productionSlots} production slots`;
            
            if (game.productionQueue.length === 0) {
                container.innerHTML = `<div style="text-align: center; color: #666; font-size: 0.8em; padding: 10px;">No items in production<br>All ${game.productionSlots} cook${game.productionSlots > 1 ? 's' : ''} available</div>`;
                return;
            }
            
            game.productionQueue.forEach((item, index) => {
                const now = Date.now();
                const progress = Math.min(100, ((now - item.startTime) / (item.endTime - item.startTime)) * 100);
                const timeLeft = Math.max(0, Math.ceil((item.endTime - now) / 1000));
                
                const div = document.createElement('div');
                div.className = 'production-item';
                div.innerHTML = `
                    <span>${item.recipe.icon} ${item.recipe.name}</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="production-progress">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <span>${timeLeft}s</span>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Update prices
        function updatePrices() {
            document.getElementById('chickenPrice').textContent = Math.floor(15 * Math.pow(1.2, game.chickens - 3));
            document.getElementById('goldenPrice').textContent = Math.floor(500 * Math.pow(1.5, game.goldenChickens));
            document.getElementById('coopPrice').textContent = Math.floor(50 * Math.pow(2, game.coopUpgrades));
            document.getElementById('kitchenPrice').textContent = Math.floor(100 * Math.pow(2, game.kitchenUpgrades));
            document.getElementById('cookPrice').textContent = Math.floor(200 * Math.pow(2.5, game.cooks - 1));
            document.getElementById('cookSalary').textContent = game.cookSalaryPerHour;
        }

        // Update game time
        function updateTime() {
            const elapsed = Date.now() - game.gameStart;
            const gameTime = elapsed * 60; // 60x speed
            
            const hours = Math.floor(gameTime / (60 * 1000));
            const days = Math.floor(hours / 24);
            
            const currentDay = days + 1;
            const currentHour = hours % 24;
            
            document.getElementById('gameDay').textContent = currentDay;
            
            const hour12 = currentHour === 0 ? 12 : currentHour > 12 ? currentHour - 12 : currentHour;
            const ampm = currentHour < 12 ? 'AM' : 'PM';
            document.getElementById('gameTime').textContent = `${hour12}:00 ${ampm}`;
        }

        // Show floating text
        function floatingText(text) {
            const div = document.createElement('div');
            div.className = 'floating-text';
            div.textContent = text;
            
            const btn = document.querySelector('.collect-button');
            const rect = btn.getBoundingClientRect();
            
            div.style.left = (rect.left + rect.width / 2) + 'px';
            div.style.top = (rect.top + rect.height / 2) + 'px';
            
            document.body.appendChild(div);
            
            setTimeout(() => {
                if (div.parentNode) div.parentNode.removeChild(div);
            }, 2000);
        }

        // Save game
        function saveGame() {
            try {
                localStorage.setItem('chickenGame', JSON.stringify(game));
                console.log('Game saved');
            } catch (e) {
                console.error('Save failed:', e);
            }
        }

        // Load game
        function loadGame() {
            try {
                const saved = localStorage.getItem('chickenGame');
                if (saved) {
                    Object.assign(game, JSON.parse(saved));
                    game.lastUpdate = Date.now();
                    console.log('Game loaded');
                }
            } catch (e) {
                console.error('Load failed:', e);
            }
        }

        // Show debug info
        function showDebug() {
            const totalConsumption = (game.chickens * 120 + game.goldenChickens * 180); // Per hour
            const productiveChickens = game.feedInventory > 0 || game.outOfFeedTime < game.gracePeriod ? game.chickens : 0;
            const productiveGolden = game.feedInventory > 0 || game.outOfFeedTime < game.gracePeriod ? game.goldenChickens : 0;
            const productionInfo = game.productionQueue.map(item => 
                `${item.recipe.icon} ${item.recipe.name} (${Math.ceil((item.endTime - Date.now())/1000)}s)`
            ).join(', ') || 'None';
            
            const info = `
🔍 DEBUG INFO

💰 Money: $${game.money.toFixed(2)}
🐔 Chickens: ${game.chickens} (${productiveChickens} productive)
🐓 Golden: ${game.goldenChickens} (${productiveGolden} productive)
🥚 Raw Eggs: ${Math.floor(game.eggs)} + ${Math.floor(game.goldenEggs)}🥇
📦 Egg Inventory: ${game.eggInventory} + ${game.goldenEggInventory}🥇
🌾 Feed Inventory: ${Math.floor(game.feedInventory)} units
📊 Feed Consumption: ${totalConsumption} units/hour
⏱️ Hours Remaining: ${totalConsumption > 0 ? (game.feedInventory / totalConsumption * 60).toFixed(1) : 'N/A'}
🥚 Egg Rate: ${getEggRate().toFixed(4)} eggs/sec
🥇 Golden Rate: ${getGoldenRate().toFixed(4)} eggs/sec
🍳 Production Queue: ${productionInfo}
👨‍🍳 Cooks: ${game.cooks} (${game.productionSlots} slots, $${game.cooks * game.cookSalaryPerHour}/hr salaries)
🍽️ Products: ${Object.entries(game.products).map(([k,v]) => `${recipes[k].icon}${v}`).filter(x => !x.endsWith('0')).join(' ') || 'None'}
⏰ Game Running: ${game.running}
🤖 Auto-Collector: ${game.autoCollectorActive ? 'ON' : 'OFF'} (${Math.floor(game.autoCollectorTime)}s)
🌾 Auto-Feeder: ${game.autoFeederActive ? 'ON' : 'OFF'} (${Math.floor(game.autoFeederTime)}s)
${game.feedInventory <= 0 ? `⚠️ Grace Period: ${Math.max(0, game.gracePeriod - game.outOfFeedTime).toFixed(1)}s remaining` : ''}
            `;
            alert(info);
        }

        // Auto-save before unload
        window.addEventListener('beforeunload', saveGame);
    </script>
</body>
</html>
